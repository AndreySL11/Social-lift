<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Social Lift Jump — Social Lift</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap');
  body, html {
    margin: 0; padding: 0; height: 100%;
    background: #000;
    font-family: 'Montserrat', sans-serif;
    overflow: hidden;
    color: #fff;
    user-select: none;
  }
  #gameCanvas {
    display: block;
    margin: 0 auto;
    background: #000;
    border-radius: 16px;
    box-shadow: 0 0 30px #00bfff;
    touch-action: none;
    max-width: 100vw;
    max-height: 80vh;
    position: relative;
    z-index: 1;
  }
  #ui {
    position: fixed;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 320px;
    display: flex;
    justify-content: space-between;
    font-size: 20px;
    font-weight: 700;
    z-index: 1000;
    pointer-events: none;
  }
  button {
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    font-size: 18px;
    padding: 10px 20px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    background-color: #00bfff;
    color: #000;
    margin: 8px;
    box-shadow: 0 0 20px #00bfffaa;
    user-select: none;
    pointer-events: auto;
    transition: background-color 0.3s ease;
    z-index: 1100;
  }
  button:hover {
    background-color: #0099cc;
  }
  .screen {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 320px;
    max-width: 95vw;
    max-height: 80vh;
    padding: 20px;
    background: rgba(0,0,0,0.95);
    border-radius: 20px;
    box-shadow: 0 0 40px #00bfffcc;
    transform: translate(-50%, -50%);
    text-align: center;
    color: #fff;
    user-select: none;
    z-index: 1050;
    display: none;
    overflow-y: auto;
  }
  .screen.active {
    display: block;
  }
  .shop-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 8px 0;
    border-bottom: 1px solid #00bfff44;
    padding-bottom: 8px;
  }
  .skin-preview {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    margin-right: 12px;
    background-size: cover;
    background-position: center;
    border: 2px solid #00BFFF;
    flex-shrink: 0;
  }
  .boost-desc {
    font-size: 13px;
    color: #00BFFF;
    margin-left: 8px;
  }
  #ratingList {
    max-height: 200px;
    overflow-y: auto;
    text-align: left;
    margin-top: 10px;
    font-size: 16px;
  }
</style>
</head>
<body>

<canvas id="gameCanvas" width="320" height="480"></canvas>

<div id="ui">
  <div>Высота: <span id="score">0</span> м</div>
  <div>Монеты SL: <span id="coins">0</span></div>
</div>

<div id="menu" class="screen active">
  <h2>Social Lift Jump</h2>
  <button id="startGameBtn">Начать игру</button>
  <button id="openShopBtn">Магазин</button>
  <button id="openRatingBtn">Рейтинг</button>
</div>

<div id="gameOverScreen" class="screen">
  <h2>Игра окончена</h2>
  <p>Ваш результат: <span id="finalScore">0</span> м</p>
  <p>Монеты: <span id="finalCoins">0</span></p>
  <button id="restartGameBtn">Начать заново</button>
  <button id="goToMenuBtn1">В меню</button>
</div>

<div id="shopScreen" class="screen">
  <h2>Магазин</h2>
  <div>Монеты: <span id="shopCoins">0</span></div>
  <h3>Скины</h3>
  <div id="skinsList"></div>
  <h3>Усилители</h3>
  <div id="boostersList"></div>
  <button id="closeShopBtn">Назад</button>
</div>

<div id="ratingScreen" class="screen">
  <h2>Рейтинг игроков</h2>
  <div id="ratingList">Рейтинг доступен локально</div>
  <button id="closeRatingBtn">Назад</button>
</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const tg = window.Telegram.WebApp;
  tg.expand();

  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  const width = canvas.width;
  const height = canvas.height;

  const scoreEl = document.getElementById('score');
  const coinsEl = document.getElementById('coins');
  const menu = document.getElementById('menu');
  const startGameBtn = document.getElementById('startGameBtn');
  const openShopBtn = document.getElementById('openShopBtn');
  const openRatingBtn = document.getElementById('openRatingBtn');
  const gameOverScreen = document.getElementById('gameOverScreen');
  const finalScoreEl = document.getElementById('finalScore');
  const finalCoinsEl = document.getElementById('finalCoins');
  const restartGameBtn = document.getElementById('restartGameBtn');
  const goToMenuBtn1 = document.getElementById('goToMenuBtn1');
  const shopScreen = document.getElementById('shopScreen');
  const skinsList = document.getElementById('skinsList');
  const boostersList = document.getElementById('boostersList');
  const shopCoinsEl = document.getElementById('shopCoins');
  const closeShopBtn = document.getElementById('closeShopBtn');
  const ratingScreen = document.getElementById('ratingScreen');
  const ratingList = document.getElementById('ratingList');
  const closeRatingBtn = document.getElementById('closeRatingBtn');

  // Игровые переменные и функции (как в предыдущем коде)...

  // Кнопка "Начать игру" в меню
  startGameBtn.addEventListener('click', () => {
    startGame();
    tg.MainButton.hide();
  });

  // Остальные кнопки с назначенными обработчиками
  openShopBtn.addEventListener('click', () => {
    renderShop();
    shopScreen.classList.add('active');
  });
  closeShopBtn.addEventListener('click', () => {
    shopScreen.classList.remove('active');
  });
  openRatingBtn.addEventListener('click', () => {
    const localLeaderboard = JSON.parse(localStorage.getItem('localLeaderboard') || '[]');
    if(localLeaderboard.length === 0) {
      ratingList.textContent = 'Рейтинг пуст';
    } else {
      ratingList.innerHTML = localLeaderboard.map((u,i) =>
        `<b>${i+1}.</b> ${u.name} <span style="float:right">${u.score} м</span>`
      ).join('<br>');
    }
    ratingScreen.classList.add('active');
  });
  closeRatingBtn.addEventListener('click', () => {
    ratingScreen.classList.remove('active');
  });
  restartGameBtn.addEventListener('click', () => {
    startGame();
  });
  goToMenuBtn1.addEventListener('click', () => {
    gameOverScreen.classList.remove('active');
    menu.classList.add('active');
    tg.MainButton.show();
  });

  // Инициализация
  loadProgress();
  renderShop();
  updateCoinsUI();
});
</script>
</body>
</html>



